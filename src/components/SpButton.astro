---
import type { SpButtonProps } from "../types";
import { getButtonClasses } from "@phcdevworks/spectre-ui";

const {
  as = "button",
  variant = "primary",
  size = "md",
  tone = "default",
  fullWidth = false,
  loading = false,
  disabled = false,
  iconOnly = false,
  class: className,
  ...rest
} = Astro.props as SpButtonProps;

const classes = getButtonClasses({
  variant,
  size,
  tone,
  fullWidth,
  loading,
  disabled,
  iconOnly,
});

const finalClass = [classes, className].filter(Boolean).join(" ");
---

{as === "a" ? (
  <a class={finalClass} aria-disabled={disabled || undefined} {...rest}>
    <slot />
  </a>
) : as === "span" ? (
  <span class={finalClass} aria-disabled={disabled || undefined} {...rest}>
    <slot />
  </span>
) : (
  <button
    class={finalClass}
    disabled={disabled}
    type={(rest as any).type ?? "button"}
    {...rest}
  >
    <slot />
  </button>
)}
